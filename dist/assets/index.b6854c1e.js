var b=Object.defineProperty,k=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var v=(e,t,s)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,p=(e,t)=>{for(var s in t||(t={}))I.call(t,s)&&v(e,s,t[s]);if(y)for(var s of y(t))B.call(t,s)&&v(e,s,t[s]);return e},h=(e,t)=>k(e,A(t));import{r as i,j as o,M as _,a,F as C,G as u,T as F,B as x,S as w,n as M,L as G,b as P,c as j,C as S,d as U,e as L,D as V,f as H,g as K,R as $,h as J}from"./vendor.c270cb2d.js";const q=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}};q();var T;(function(e){e.SET_TODOLIST="setTodoList",e.ADD_TODO="addTodo",e.REMOVE_TODO="removeTodo",e.TOGGLE_TODO="toggleTodo",e.REVERSE_TODOLIST="reverseTodoList",e.RESET_TODOLIST="resetTodoList",e.UPDATE_COMPLETED="updateCompleted"})(T||(T={}));function R(e){return{todoList:e,completed:0}}function z(e,t){const{type:s,payload:c}=t,{todoList:r}=e;switch(s){case T.SET_TODOLIST:return h(p({},e),{todoList:c});case T.ADD_TODO:return h(p({},e),{todoList:[c,...r]});case T.REMOVE_TODO:return h(p({},e),{todoList:r.filter(n=>n.id!==c)});case T.TOGGLE_TODO:return h(p({},e),{todoList:r.map(n=>n.id===c?h(p({},n),{completed:!n.completed}):n)});case T.REVERSE_TODOLIST:return h(p({},e),{todoList:r.map(n=>h(p({},n),{completed:c}))});case T.RESET_TODOLIST:return R(c);case T.UPDATE_COMPLETED:return h(p({},e),{completed:r.reduce((n,l)=>n+(l.completed?1:0),0)});default:throw new Error(`Unknown ${s} action type.`)}}const{SET_TODOLIST:N,ADD_TODO:Q,REMOVE_TODO:W,TOGGLE_TODO:X,REVERSE_TODOLIST:Z,RESET_TODOLIST:Y,UPDATE_COMPLETED:ee}=T,te=()=>{const[e,t]=i.exports.useReducer(z,[],R);i.exports.useEffect(()=>{var f;const d=JSON.parse((f=localStorage.getItem("todolist"))!=null?f:"[]");t({type:N,payload:d})},[]),i.exports.useEffect(()=>{t({type:ee,payload:null}),localStorage.setItem("todolist",JSON.stringify(e.todoList))},[e.todoList]);const s=i.exports.useCallback(d=>{t({type:Q,payload:d})},[]),c=i.exports.useCallback(d=>{t({type:W,payload:d})},[]),r=i.exports.useCallback(d=>{t({type:X,payload:d})},[]),n=i.exports.useCallback(d=>{t({type:Z,payload:d})},[]),l=i.exports.useCallback(d=>{t({type:Y,payload:d})},[]);return{state:e,addTodo:s,removeTodo:c,toggleTodo:r,reverseTodoList:n,resetTodoList:l}},oe=i.exports.forwardRef(function(t,s){return o(_,p({elevation:6,ref:s,variant:"filled"},t))}),re=()=>{const[e,t]=i.exports.useState("\u9ED8\u8A8D\u932F\u8AA4\u6D88\u606F"),[s,c]=i.exports.useState(!1),{state:{todoList:r},addTodo:n}=i.exports.useContext(E),l=i.exports.useRef(null),d=m=>{m.code==="Enter"&&g()},f=m=>{t(m),c(!0)},D=(m,O)=>{O!=="clickaway"&&c(!1)},g=()=>{if(!l.current)return console.log("\u627E\u4E0D\u5230 inputRef DOM \u7BC0\u9EDE");const m=l.current.value.trim();if(r.find(O=>O.content===m))return f("\u8A72\u4EE3\u8FA6\u4E8B\u9805\u5DF2\u5B58\u5728");if(!m.length)return f("\u8ACB\u8F38\u5165\u6709\u6548\u5167\u5BB9\u7684\u4EE3\u8FA6\u4E8B\u9805");n({id:M(),content:m,completed:!1}),l.current.value=""};return a(C,{children:[a(u,{container:!0,columns:10,spacing:2,children:[o(u,{item:!0,xs:8,children:o(F,{label:"\u8ACB\u8F38\u5165\u4EE3\u8FA6\u4E8B\u9805",variant:"outlined",onKeyUp:d,inputRef:l,sx:{width:"100%"}})}),o(u,{item:!0,xs:2,children:o(x,{onClick:g,variant:"contained",sx:{width:"100%",height:"100%"},children:"\u65B0\u589E"})})]}),o(w,{open:s,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:D,children:o(oe,{onClose:D,severity:"error",sx:{width:"100%"},children:e})})]})},ne=({todo:e})=>{const{toggleTodo:t,removeTodo:s}=i.exports.useContext(E);return a(C,{children:[o(G,{disablePadding:!0,dense:!0,children:a(P,{onClick:()=>t(e.id),children:[o(j,{children:o(S,{checked:e.completed,disableRipple:!0})}),o(U,{children:o(L,{children:e.content})}),o(x,{variant:"outlined",onClick:()=>s(e.id),children:"\u522A\u9664"})]})}),o(V,{})]})},se=()=>{const{state:{todoList:e}}=i.exports.useContext(E);return o(H,{disablePadding:!0,sx:{width:"100%"},children:e.map(t=>o(ne,{todo:t},t.id))})},ie=()=>{const{state:{todoList:e,completed:t},reverseTodoList:s,resetTodoList:c}=i.exports.useContext(E);return a(u,{container:!0,sx:{justifyContent:"space-between",alignItems:"center"},children:[a(u,{item:!0,children:[o(S,{checked:t===e.length,onChange:r=>s(r.target.checked)}),a(L,{variant:"button",children:[t," / ",e.length]})]}),o(u,{item:!0,children:o(x,{variant:"contained",onClick:()=>c([]),children:"\u91CD\u7F6E"})})]})},E=i.exports.createContext(null),ce=()=>{const{state:e,addTodo:t,removeTodo:s,toggleTodo:c,reverseTodoList:r,resetTodoList:n}=te();return o(E.Provider,{value:{state:e,addTodo:t,removeTodo:s,toggleTodo:c,reverseTodoList:r,resetTodoList:n},children:a(u,{container:!0,direction:"column",columns:10,sx:{userSelect:"none"},children:[a(u,{item:!0,xs:2,children:[a(u,{container:!0,spacing:2,sx:{alignItems:"center"},children:[o(u,{item:!0,children:o(L,{variant:"h3",children:"TodoList"})}),a(u,{item:!0,children:["React ",i.exports.version]})]}),o(L,{variant:"subtitle1"})]}),a(u,{item:!0,xs:8,children:[o(re,{}),o(se,{}),e.todoList.length>0&&o(ie,{})]})]})})},de=()=>o(K,{sx:{paddingTop:"4rem"},children:o(ce,{})});$.render(a(i.exports.StrictMode,{children:[o(J,{}),o(de,{})]}),document.getElementById("root"));console.log(`React: ${i.exports.version} | Project: production | By NekoChanTaiwan`);
