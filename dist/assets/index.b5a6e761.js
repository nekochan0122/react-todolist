var x=Object.defineProperty,y=Object.defineProperties;var g=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var m=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,l=(e,t)=>{for(var n in t||(t={}))S.call(t,n)&&m(e,n,t[n]);if(f)for(var n of f(t))R.call(t,n)&&m(e,n,t[n]);return e},a=(e,t)=>y(e,g(t));import{r as u,j as O,n as _,R as C}from"./vendor.24963abf.js";const v=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}};v();var E;(function(e){e.SET_TODOLIST="setTodoList",e.ADD_TODO="addTodo",e.REMOVE_TODO="removeTodo",e.TOGGLE_TODO="toggleTodo",e.REVERSE_TODOLIST="reverseTodoList",e.RESET_TODOLIST="resetTodoList",e.UPDATE_COMPLETED="updateCompleted"})(E||(E={}));const{SET_TODOLIST:b,ADD_TODO:k,REMOVE_TODO:A,TOGGLE_TODO:I,REVERSE_TODOLIST:B,RESET_TODOLIST:M,UPDATE_COMPLETED:F}=E;function h(e){return{todoList:e,completed:0}}function $(e,t){const{type:n,payload:s}=t,{todoList:r}=e;switch(n){case b:return a(l({},e),{todoList:s});case k:return a(l({},e),{todoList:[s,...r]});case A:return a(l({},e),{todoList:r.filter(o=>o.id!==s)});case I:return a(l({},e),{todoList:r.map(o=>o.id===s?a(l({},o),{completed:!o.completed}):o)});case B:return a(l({},e),{todoList:r.map(o=>a(l({},o),{completed:s}))});case M:return h(s);case F:return a(l({},e),{completed:r.reduce((o,i)=>o+(i.completed?1:0),0)});default:throw new Error(`Unknown ${n} action type.`)}}const{SET_TODOLIST:j,ADD_TODO:G,REMOVE_TODO:V,TOGGLE_TODO:P,REVERSE_TODOLIST:U,RESET_TODOLIST:w,UPDATE_COMPLETED:K}=E,H=()=>{const[e,t]=u.exports.useReducer($,[],h);u.exports.useEffect(()=>{var D;const d=JSON.parse((D=localStorage.getItem("todolist"))!=null?D:"[]");t({type:j,payload:d})},[]),u.exports.useEffect(()=>{t({type:K,payload:null}),localStorage.setItem("todolist",JSON.stringify(e.todoList))},[e.todoList]);const n=u.exports.useCallback(d=>{t({type:G,payload:d})},[]),s=u.exports.useCallback(d=>{t({type:V,payload:d})},[]),r=u.exports.useCallback(d=>{t({type:P,payload:d})},[]),o=u.exports.useCallback(d=>{t({type:U,payload:d})},[]),i=u.exports.useCallback(d=>{t({type:w,payload:d})},[]);return{state:e,addTodo:n,removeTodo:s,toggleTodo:r,reverseTodoList:o,resetTodoList:i}},c=O.exports.jsx,p=O.exports.jsxs,L=O.exports.Fragment,J=()=>{const{state:{todoList:e},addTodo:t}=u.exports.useContext(T),n=u.exports.useRef(null),s=o=>{o.code==="Enter"&&r()},r=()=>{if(!n.current)return console.log("\u627E\u4E0D\u5230 inputRef DOM \u7BC0\u9EDE");const o=n.current.value.trim();if(e.find(i=>i.content===o))return alert("\u8A72\u4EE3\u8FA6\u4E8B\u9805\u5DF2\u5B58\u5728");if(!o.length)return alert("\u8ACB\u8F38\u5165\u6709\u6548\u5167\u5BB9\u7684\u4EE3\u8FA6\u4E8B\u9805");t({id:_(),content:o,completed:!1}),n.current.value=""};return p(L,{children:[c("input",{onKeyUp:s,type:"text",placeholder:"\u8ACB\u8F38\u5165\u4EE3\u8FA6\u4E8B\u9805",ref:n}),c("button",{onClick:r,children:"\u65B0\u589E"})]})},q=({todo:e})=>{const{toggleTodo:t,removeTodo:n}=u.exports.useContext(T);return p("li",{children:[c("input",{type:"checkbox",checked:e.completed,onChange:()=>t(e.id)}),c("span",{style:{textDecorationLine:e.completed?"line-through":"none"},children:e.content}),c("button",{onClick:()=>n(e.id),children:"\u522A\u9664"})]})},N=()=>{const{state:{todoList:e}}=u.exports.useContext(T);return c("ul",{children:e.map(t=>c(q,{todo:t},t.id))})},z=()=>{const{state:{todoList:e,completed:t},reverseTodoList:n,resetTodoList:s}=u.exports.useContext(T);return p(L,{children:[c("input",{type:"checkbox",checked:t===e.length,onChange:r=>n(r.target.checked)}),p("span",{children:["\xA0",t," / ",e.length,"\xA0"]}),c("button",{onClick:()=>s([]),children:"\u91CD\u7F6E"})]})},T=u.exports.createContext(null),Q=()=>{const{state:e,addTodo:t,removeTodo:n,toggleTodo:s,reverseTodoList:r,resetTodoList:o}=H();return p(T.Provider,{value:{state:e,addTodo:t,removeTodo:n,toggleTodo:s,reverseTodoList:r,resetTodoList:o},children:[c("h1",{children:"TodoList"}),c(J,{}),c(N,{}),e.todoList.length>0&&c(z,{})]})},W=()=>c(L,{children:c(Q,{})});C.render(c(u.exports.StrictMode,{children:c(W,{})}),document.getElementById("root"));console.log(`React: ${u.exports.version} | Project: production | By NekoChanTaiwan`);
