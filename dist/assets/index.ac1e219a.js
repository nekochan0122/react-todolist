var k=Object.defineProperty,R=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var y=(e,t,i)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,p=(e,t)=>{for(var i in t||(t={}))B.call(t,i)&&y(e,i,t[i]);if(D)for(var i of D(t))_.call(t,i)&&y(e,i,t[i]);return e},h=(e,t)=>R(e,I(t));import{r as s,j as r,M as A,n as F,a,F as C,G as d,T as w,B as v,S as M,L as G,b as H,c as P,C as b,d as j,e as E,I as U,f as V,D as K,g as $,h as J,R as q,i as z}from"./vendor.5f901acc.js";const N=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function i(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(o){if(o.ep)return;o.ep=!0;const n=i(o);fetch(o.href,n)}};N();var T;(function(e){e.SET_TODOLIST="setTodoList",e.ADD_TODO="addTodo",e.REMOVE_TODO="removeTodo",e.TOGGLE_TODO="toggleTodo",e.REVERSE_TODOLIST="reverseTodoList",e.RESET_TODOLIST="resetTodoList",e.UPDATE_COMPLETED="updateCompleted"})(T||(T={}));function S(){return{todoList:[],completed:0}}function Q(e,t){const{type:i,payload:l}=t,{todoList:o}=e;switch(i){case T.SET_TODOLIST:return h(p({},e),{todoList:l});case T.ADD_TODO:return h(p({},e),{todoList:[l,...o]});case T.REMOVE_TODO:return h(p({},e),{todoList:o.filter(n=>n.id!==l)});case T.TOGGLE_TODO:return h(p({},e),{todoList:o.map(n=>n.id===l?h(p({},n),{completed:!n.completed}):n)});case T.REVERSE_TODOLIST:return h(p({},e),{todoList:o.map(n=>h(p({},n),{completed:l}))});case T.RESET_TODOLIST:return S();case T.UPDATE_COMPLETED:return h(p({},e),{completed:o.reduce((n,c)=>n+(c.completed?1:0),0)});default:throw new Error(`Unknown ${i} action type.`)}}const{SET_TODOLIST:W,ADD_TODO:X,REMOVE_TODO:Z,TOGGLE_TODO:Y,REVERSE_TODOLIST:ee,RESET_TODOLIST:te,UPDATE_COMPLETED:oe}=T,re=()=>{const[e,t]=s.exports.useReducer(Q,null,S);s.exports.useEffect(()=>{var f;const u=JSON.parse((f=localStorage.getItem("todolist"))!=null?f:"[]");t({type:W,payload:u})},[]),s.exports.useEffect(()=>{t({type:oe,payload:null}),localStorage.setItem("todolist",JSON.stringify(e.todoList))},[e.todoList]);const i=s.exports.useCallback(u=>{t({type:X,payload:u})},[]),l=s.exports.useCallback(u=>{t({type:Z,payload:u})},[]),o=s.exports.useCallback(u=>{t({type:Y,payload:u})},[]),n=s.exports.useCallback(u=>{t({type:ee,payload:u})},[]),c=s.exports.useCallback(()=>{t({type:te,payload:null})},[]);return{state:e,addTodo:i,removeTodo:l,toggleTodo:o,reverseTodoList:n,resetTodoList:c}},ne=s.exports.forwardRef(function(t,i){return r(A,p({elevation:6,ref:i,variant:"filled"},t))}),se=()=>{const[e,t]=s.exports.useState("\u9ED8\u8A8D\u932F\u8AA4\u6D88\u606F"),[i,l]=s.exports.useState(!1),{state:{todoList:o},addTodo:n}=s.exports.useContext(x),c=s.exports.useRef(null),u=s.exports.useCallback(m=>{m.code==="Enter"&&g()},[]),f=s.exports.useCallback(m=>{t(m),l(!0)},[]),O=s.exports.useCallback((m,L)=>{L!=="clickaway"&&l(!1)},[]),g=s.exports.useCallback(()=>{if(!c.current)return console.log("\u627E\u4E0D\u5230 inputRef DOM \u7BC0\u9EDE");const m=c.current.value.trim();if(o.find(L=>L.content===m))return f("\u8A72\u4EE3\u8FA6\u4E8B\u9805\u5DF2\u5B58\u5728");if(!m.length)return f("\u8ACB\u8F38\u5165\u6709\u6548\u5167\u5BB9\u7684\u4EE3\u8FA6\u4E8B\u9805");n({id:F(),content:m,completed:!1}),c.current.value=""},[o]);return a(C,{children:[a(d,{container:!0,columns:10,spacing:2,children:[r(d,{item:!0,xs:8,children:r(w,{label:"\u8ACB\u8F38\u5165\u4EE3\u8FA6\u4E8B\u9805",variant:"outlined",onKeyUp:u,inputRef:c,sx:{width:"100%"}})}),r(d,{item:!0,xs:2,children:r(v,{onClick:g,variant:"contained",sx:{width:"100%",height:"100%"},children:"\u65B0\u589E"})})]}),r(M,{open:i,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:O,children:r(ne,{onClose:O,severity:"error",sx:{width:"100%"},children:e})})]})},ie=({todo:e})=>{const{toggleTodo:t,removeTodo:i}=s.exports.useContext(x),l=s.exports.useCallback(()=>t(e.id),[]),o=s.exports.useCallback(()=>i(e.id),[]);return a(C,{children:[r(G,{disablePadding:!0,dense:!0,children:a(H,{"aria-label":"reverse completed button",onClick:l,children:[r(P,{"aria-label":"reverse completed icon",children:r(b,{checked:e.completed,disableRipple:!0})}),r(j,{"aria-label":"content",children:r(E,{children:e.content})}),r(U,{"aria-label":"delete button",color:"default",onClick:o,children:r(V,{})})]})}),r(K,{})]})},le=()=>{const{state:{todoList:e}}=s.exports.useContext(x);return r($,{disablePadding:!0,sx:{width:"100%"},children:e.map(t=>r(ie,{todo:t},t.id))})},ce=()=>{const{state:{todoList:e,completed:t},reverseTodoList:i,resetTodoList:l}=s.exports.useContext(x),o=s.exports.useCallback(c=>i(c.target.checked),[]),n=s.exports.useCallback(()=>l(),[]);return a(d,{container:!0,sx:{justifyContent:"space-between",alignItems:"center"},children:[a(d,{item:!0,children:[r(b,{checked:t===e.length,onChange:o}),a(E,{variant:"button",children:[t," / ",e.length]})]}),r(d,{item:!0,children:r(v,{variant:"contained",onClick:n,children:"\u91CD\u7F6E"})})]})},x=s.exports.createContext(null),ae=()=>{const{state:e,addTodo:t,removeTodo:i,toggleTodo:l,reverseTodoList:o,resetTodoList:n}=re();return r(x.Provider,{value:{state:e,addTodo:t,removeTodo:i,toggleTodo:l,reverseTodoList:o,resetTodoList:n},children:a(d,{container:!0,direction:"column",columns:10,sx:{userSelect:"none"},children:[a(d,{item:!0,xs:2,children:[a(d,{container:!0,spacing:2,sx:{alignItems:"center"},children:[r(d,{item:!0,children:r(E,{variant:"h3",children:"TodoList"})}),a(d,{item:!0,children:["React ",s.exports.version]})]}),r(E,{variant:"subtitle1"})]}),a(d,{item:!0,xs:8,children:[r(se,{}),r(le,{}),e.todoList.length>0&&r(ce,{})]})]})})},de=()=>r(J,{sx:{paddingTop:"4rem"},children:r(ae,{})});q.render(a(s.exports.StrictMode,{children:[r(z,{}),r(de,{})]}),document.getElementById("root"));console.log(`React: ${s.exports.version} | Project: production | By NekoChanTaiwan`);
